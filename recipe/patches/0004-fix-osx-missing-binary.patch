From b93a3e843f2959ee6ba5bb1c585f60c5e696b0e3 Mon Sep 17 00:00:00 2001
From: Eric Lundby <Eric.Lundby@gmail.com>
Date: Wed, 16 Jul 2025 15:54:18 -0600
Subject: [PATCH 1/1] fix-osx-missing-binary

---
 compile.sh | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/compile.sh b/compile.sh
index 7ad2c0cdc9..ce3ff6e470 100755
--- a/compile.sh
+++ b/compile.sh
@@ -76,7 +76,13 @@ bazel_build "src:bazel_nojdk${EXE_EXT}" \
   --host_platform=@platforms//host \
   --platforms=@platforms//host \
   || fail "Could not build Bazel"
+
 bazel_bin_path="$(get_bazel_bin_path)/src/bazel_nojdk${EXE_EXT}"
+if [ ! -e "$bazel_bin_path" ]; then
+    # Fallback to the relative path
+    bazel_bin_path="bazel-bin/src/bazel_nojdk${EXE_EXT}"
+fi
+
 [ -e "$bazel_bin_path" ] \
   || fail "Could not find freshly built Bazel binary at '$bazel_bin_path'"
 cp -f "$bazel_bin_path" "output/bazel${EXE_EXT}" \
-- 
2.45.2

